# Maintainer: Mattia Procopio (astro.matto)  <matto.astro at gmail dot com>
pkgname=libindi
pkgver=1.9.4
pkgrel=1
epoch=
pkgdesc="Indi core library"
arch=(x86_64 aarch64)
url="https://github.com/indilib/indi"
license=('LGPL')
depends=('cfitsio' 'fftw' 'libjpeg-turbo' 'libnova' 'libtheora' 'libusb' 'boost' 'gsl')
makedepends=(cmake)
source=("https://github.com/indilib/indi/archive/refs/tags/v$pkgver.tar.gz")
sha256sums=('0d2ec2a472bba04020a24bf34554318e9c891bd14b06c175f6a272ed24b90fe9')

prepare() {
	mkdir -p build
}

build() {
	cd build
	cmake -DCMAKE_INSTALL_PREFIX=/usr -DCMAKE_BUILD_TYPE=Debug ../indi-$pkgver
	make -j4
}

package() {
	cd build
	make DESTDIR="$pkgdir" prefix=/usr install
	mv "$pkgdir/lib/udev" "$pkgdir/usr/lib"
	rmdir "$pkgdir/lib"
}
